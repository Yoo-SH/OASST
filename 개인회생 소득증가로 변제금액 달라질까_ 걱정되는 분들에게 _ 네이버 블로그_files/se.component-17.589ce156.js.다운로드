(window.__se_viewer_jsonp=window.__se_viewer_jsonp||[]).push([[35],{507:function(t,i,e){"use strict";e.r(i);e(20),e(38);var n=e(30),s=e.n(n),o=e(221),a=e.n(o),r=e(63),h=(e(39),e(73),e(51),e(32),e(107),e(40),e(225),e(224),e(156),e(155),e(226),e(223),{NEXT:Symbol("NEXT"),PREV:Symbol("PREV")}),l=!!("getComputedStyle"in window),u=!!("addEventListener"in document),_=function(){for(var t=(document.head||document.getElementsByTagName("head")[0]).style,i=["transform","webkitTransform","msTransform","mozTransform"],e=0,n=i.length;e<n;e++)if(i[e]in t)return i[e];return""}(),g="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";function d(t){return function(t,i){if(t===window)return t.document.documentElement["client"+i];if(9===t.nodeType){var e=t.documentElement;return Math.max(t.body["scroll"+i],e["scroll"+i],t.body["offset"+i],e["offset"+i],e["client"+i])}var n=function(t){return l?window.getComputedStyle(t):t.currentStyle}(t),s=n[i.toLowerCase()];return parseFloat(/auto|%/.test(s)?t["offset"+i]:n[i.toLowerCase()])}(t,"Width")}var c=function(t,i){var e=this;this.options=i,this._events={},this._left=0,this._axes=new seEg.MovableCoord({min:[0,0],max:[100,100],bounce:[this.options.bounce,this.options.bounce]}),this._axes.on("animationEnd",function(){e.trigger("changePosition",{left:e._left})}),this._bind(t,[-1,1]),this.options.thumb&&this._bind(this.options.thumb,[-1,1]),this._size={view:0,container:0},this._view=t,this._container=t.children[0],this._children=[],this._items=[],this._init()};c.prototype._bind=function(t,i){this._axes.bind(t,{scale:i,direction:seEg.MovableCoord.DIRECTION_HORIZONTAL})},c.prototype._setPosition=function(t,i){void 0===i&&(i=0);var e=this._size.container-this._size.view;e<=0||(this._left=t,this._axes.setTo(t/e*100,0,i))},c.prototype._scroll=function(t){var i=t[0],e=i*(this._size.container-this._size.view)/100;if(this._container.style[_||"left"]=_?"translateX("+-e+"px)":-e+"px",this.options.thumb){var n=100-this._size.thumb,s=n*i/100;this.options.thumb.style.left=Math.min(Math.max(s,0),n)+"%"}this._left=e,this.trigger("changePosition",{left:this._left})},c.prototype._init=function(){this._axes.on("change",function(t){var i=t.pos;this._scroll(i)}.bind(this)),function(t,i,e){u?t.addEventListener(i,e,!1):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e}(this._container,g,function(t){var i=t.deltaX,e=t.deltaY;"mousewheel"===g?(e=-.025*t.wheelDelta,t.wheelDeltaX&&(i=-.025*t.wheelDeltaX)):e=t.deltaY||t.detail,0===i||Math.abs(e)>Math.abs(i)||((0===e||Math.abs(e)<Math.abs(i))&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this._axes.setBy(i,0,0))}.bind(this)),this.resize()},c.prototype.prev=function(t){this._moveTo(h.PREV,t)},c.prototype.next=function(t){this._moveTo(h.NEXT,t)},c.prototype._moveTo=function(t,i){void 0===t&&(t=h.NEXT);var e=this.getCurrentPosition(t);if(e){var n,s=this._size.view,o=t===h.NEXT,a=e[o?"endIndex":"startIndex"],r=this._items[a],l=o?"right":"left";if(e[l]===r[l]){if(this._isLastIndex(a,t))return;n=this._getFollowingPosition(a,t)}else{var u=r.right-r.left;n=u>s?o?r.left+u-s:r.left:this._getFollowingPosition(a,t)}this._setPosition(n,i)}},c.prototype.getCurrentPosition=function(t){var i=this._size.view;if(!(this._size.container-i<=0)){var e=Math.max(Math.round(this._left),0),n=e+i,s=function(t,i,e,n){void 0===n&&(n=h.NEXT);var s=t.reduce(function(t,n,s){return(i<=n.left&&n.right<=e||n.left<=i&&e<=n.right)&&t.push(s),t},[]);if(s.length)return s;var o=n===h.NEXT?"left":"right";return[t.findIndex(function(t){return i<=t[o]&&t[o]<=e})]}(this._items,e,n,t);return{left:e,right:n,startIndex:s[0],endIndex:s[s.length-1]}}},c.prototype._isLastIndex=function(t,i){return i===h.NEXT?t+1===this._items.length:0===t},c.prototype._getFollowingPosition=function(t,i){var e=i===h.NEXT,n=this._size.view,s=this._items[t+(e?1:-1)];s||(s=this._items[t]);var o=s.right-s.left;return o>n?e?s.left:s.right-n:s.left-(n-o)/2},c.prototype.destory=function(){this._axes.destory(),this._axes=null},c.prototype.on=function(t,i){return!this._events[t]&&(this._events[t]=[]),this._events[t].push(i),this},c.prototype.trigger=function(t,i){if(!this._events[t])return this;for(var e=this._events[t],n=e.length,s=0;s<n;++s)e[s](i)},c.prototype.getImagePanelSize=function(){return this._size},c.prototype.isShowBar=function(){return!!this._isShowBar},c.prototype.resize=function(){var t=this._view.getElementsByClassName("se-image-resource"),i=Array.prototype.slice.call(t);return Promise.all(i.map(function(t){return new Promise(function(i,e){if(t.complete)return i();var n=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);t.setAttribute("data-seuuid",n),t.addEventListener("load",function(){n!==t.getAttribute("data-seuuid")?e():(t.removeAttribute("data-seuuid"),i())})})})).then(function(){this._resize()}.bind(this)).catch(function(){})},c.prototype._resize=function(){var t=this._view,i=this._container,e=this._view.offsetWidth;this._size={view:e,container:Math.round(Math.max(t.scrollWidth,i.scrollWidth,d(i)))};var n=this._size.container-this._size.view,s=n?Math.max(100/n,0):0;if(this._axes.unbind(this._view),this._bind(this._view,[-s,1]),this.options.thumb){this._size.progress=this.options.progress&&d(this.options.progress)||this._size.view,this._size.thumb=this._size.view/this._size.container*100;var o=100/(this._size.progress*(1-this._size.thumb/100)),a=this.options.thumb.style;this._size.thumb>=100?(this._isShowBar=!1,(!a.display||"none"!==a.display)&&this.trigger("hideBar"),this.options.thumb.style.display="none",this.options.progress.style.display="none"):(this._isShowBar=!0,(!a.display||"none"===a.display)&&this.trigger("showBar"),this._axes.unbind(this.options.thumb),this._bind(this.options.thumb,[o,1]),this.options.thumb.style.width=this._size.thumb+"%",this.options.thumb.style.display="block",this.options.progress.style.display="block")}for(var r,h=[],l=Array.prototype.slice.call(i.children),u=l.length,_=0;_<u;++_)if(1!==l[_].nodeType)r=0===_?0:h[_].right,r=Math.round(r),h.push({left:r,right:r});else{var g=l[_].offsetLeft;g=Math.round(g),h.push({left:g,right:Math.round(g+d(l[_]))})}this._items=h,this._children=l,this._scroll(n<0?0:this._axes.get())};var v=c;e.d(i,"ImageGroupComponent",function(){return f});var f=function(t){function i(i){var e,n=i.initData,s=i.instanceStatus;return(e=t.call(this,s)||this)._isMobile=r.e.isMobile(),e._initVar(n),e._initModule(n),e.__ON_READY_COMPONENT__("image-group"),e}s()(i,t);var e=i.prototype;return e._initVar=function(t){this._$elBase=$seJq("#"+t.id),this._$elNavigationWrap=this._$elBase.find(".se-imageGroup-navigation"),this._$elNextNavigationButton=this._$elBase.find(".se-imageGroup-navigation-button-next"),this._$elPrevNavigationButton=this._$elBase.find(".se-imageGroup-navigation-button-prev")},e._initModule=function(t){"slide"===t.layout&&this._initSlideImagePanelModule(t)},e._initSlideImagePanelModule=function(){var t=this._$elBase.find(".se-imageGroup-viewer").get(0),i=this._$elBase.find(".se-imageGroup-progress").get(0),e=this._$elBase.find(".se-imageGroup-thumb").get(0);this._imagePanel=new v(t,{bounce:0,progress:i,thumb:e,right:!0}),this._bindSlideImagePanelEvent(),this._hideBar(),this._isMobile?this._removeNavigationButton():(this._imagePanel.on("changePosition",this._changeImagePanelPosition.bind(this)),this._resizeImagePanel(),this._checkNavigationButton())},e._changeImagePanelPosition=function(t){this._checkNavigationButton(),t&&this.emit("onChangePosition",t)},e._resizeImagePanel=function(){var t=this;this._imagePanel.resize().then(function(){t._checkShowBar()})},e._bindSlideImagePanelEvent=function(){var t=this;this._$elBase.on("click",this._stopClickEventWithDragging.bind(this)),this._$elBase.on("mousedown",this._saveCurrentPageX.bind(this)),this._isMobile||(this._$elBase.on("click",".se-imageGroup-navigation-button-prev",this._onClickPrevSlide.bind(this)),this._$elBase.on("click",".se-imageGroup-navigation-button-next",this._onClickNextSlide.bind(this))),window.addEventListener("resize",a()(function(){return t._resizeImagePanel()},250))},e._stopClickEventWithDragging=function(t){this._isDragged(t.pageX)&&(t.stopPropagation(),t.preventDefault()),this.pageX=null},e._isDragged=function(t){return!!this.pageX&&Math.abs(t-this.pageX)>5},e._saveCurrentPageX=function(t){this.pageX=t.pageX},e._checkShowBar=function(){this._imagePanel.isShowBar()&&!this._isMobile?this._showBar():this._hideBar()},e._checkNavigationButton=function(){var t=this._imagePanel.getCurrentPosition(),i=this._imagePanel.getImagePanelSize();!t||t.left<=0?(this._disabledNavigationButton(this._$elPrevNavigationButton),this._enableNavigationButton(this._$elNextNavigationButton)):t.right>=i.container?(this._disabledNavigationButton(this._$elNextNavigationButton),this._enableNavigationButton(this._$elPrevNavigationButton)):(this._enableNavigationButton(this._$elPrevNavigationButton),this._enableNavigationButton(this._$elNextNavigationButton))},e._enableNavigationButton=function(t){t.removeAttr("disabled")},e._disabledNavigationButton=function(t){t.attr("disabled","disabled")},e._removeNavigationButton=function(){this._$elNavigationWrap.remove()},e._showBar=function(){this._$elNavigationWrap.addClass("se-is-on")},e._hideBar=function(){this._$elNavigationWrap.removeClass("se-is-on")},e._onClickPrevSlide=function(){this._imagePanel.prev(200)},e._onClickNextSlide=function(){this._imagePanel.next(200)},i}(r.a);i.default=f}}]);